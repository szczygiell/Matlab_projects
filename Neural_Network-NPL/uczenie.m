%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.598674e+004; foe(n+1)=1.626308e+004; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.148855e+004; foe(n+1)=1.181056e+004; krok(n+1)=5.119287e-004; ng(n+1)=6.877765e+003;
n=2; farx(n+1)=7.199780e+003; foe(n+1)=1.501918e+003; krok(n+1)=2.673755e-003; ng(n+1)=8.191785e+003;
n=3; farx(n+1)=6.666446e+003; foe(n+1)=1.360198e+003; krok(n+1)=9.970602e-006; ng(n+1)=9.905144e+003;
n=4; farx(n+1)=7.008481e+003; foe(n+1)=6.724843e+002; krok(n+1)=5.148205e-004; ng(n+1)=8.917758e+003;
n=5; farx(n+1)=6.653403e+003; foe(n+1)=5.941732e+002; krok(n+1)=1.775639e-004; ng(n+1)=3.139577e+003;
n=6; farx(n+1)=6.720387e+003; foe(n+1)=3.308717e+002; krok(n+1)=4.740920e-004; ng(n+1)=4.222566e+003;
n=7; farx(n+1)=6.257772e+003; foe(n+1)=1.434576e+002; krok(n+1)=8.899923e-004; ng(n+1)=2.164495e+003;
n=8; farx(n+1)=6.257768e+003; foe(n+1)=1.472963e+002; krok(n+1)=2.618256e-009; ng(n+1)=9.120600e+002;
n=9; farx(n+1)=4.107074e+003; foe(n+1)=1.232625e+002; krok(n+1)=2.418465e-004; ng(n+1)=4.476308e+003;
n=10; farx(n+1)=3.467427e+003; foe(n+1)=1.089991e+002; krok(n+1)=1.538323e-003; ng(n+1)=1.213054e+003;
n=11; farx(n+1)=1.640041e+003; foe(n+1)=7.142479e+001; krok(n+1)=1.288992e-004; ng(n+1)=8.763660e+003;
n=12; farx(n+1)=1.524027e+003; foe(n+1)=7.780842e+001; krok(n+1)=5.312686e-007; ng(n+1)=1.443587e+004;
n=13; farx(n+1)=5.057336e+002; foe(n+1)=3.319537e+001; krok(n+1)=1.080932e-004; ng(n+1)=4.357281e+004;
n=14; farx(n+1)=4.746466e+002; foe(n+1)=2.395322e+001; krok(n+1)=2.507969e-003; ng(n+1)=7.342870e+002;
n=15; farx(n+1)=4.082131e+002; foe(n+1)=1.656290e+001; krok(n+1)=1.641118e-003; ng(n+1)=1.282171e+003;
n=16; farx(n+1)=1.445541e+002; foe(n+1)=8.507858e+000; krok(n+1)=3.453662e-002; ng(n+1)=1.674923e+002;
n=17; farx(n+1)=1.443945e+002; foe(n+1)=8.506746e+000; krok(n+1)=1.430061e-005; ng(n+1)=8.632853e+002;
n=18; farx(n+1)=7.346107e+001; foe(n+1)=4.714708e+000; krok(n+1)=9.359566e-005; ng(n+1)=8.655331e+002;
n=19; farx(n+1)=4.976759e+001; foe(n+1)=4.123486e+000; krok(n+1)=1.708995e-002; ng(n+1)=1.685623e+002;
n=20; farx(n+1)=4.975225e+001; foe(n+1)=4.121892e+000; krok(n+1)=2.958813e-005; ng(n+1)=2.154847e+002;
n=21; farx(n+1)=1.414996e+001; foe(n+1)=2.073294e+000; krok(n+1)=1.796068e-005; ng(n+1)=2.152384e+002;
n=22; farx(n+1)=1.414928e+001; foe(n+1)=2.073744e+000; krok(n+1)=1.448606e-005; ng(n+1)=3.413994e+002;
n=23; farx(n+1)=1.414645e+001; foe(n+1)=2.076298e+000; krok(n+1)=1.421597e-005; ng(n+1)=3.414999e+002;
n=24; farx(n+1)=1.414502e+001; foe(n+1)=2.072326e+000; krok(n+1)=1.693536e-005; ng(n+1)=3.421452e+002;
n=25; farx(n+1)=1.414463e+001; foe(n+1)=2.073943e+000; krok(n+1)=4.035864e-006; ng(n+1)=3.410713e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.370122e+001; foe(n+1)=1.723836e+000; krok(n+1)=4.937118e-005; ng(n+1)=3.414964e+002;
n=27; farx(n+1)=1.354277e+001; foe(n+1)=1.534712e+000; krok(n+1)=3.099536e-004; ng(n+1)=1.154570e+002;
n=28; farx(n+1)=1.393174e+001; foe(n+1)=1.459934e+000; krok(n+1)=1.353136e-003; ng(n+1)=3.100566e+001;
n=29; farx(n+1)=1.136830e+001; foe(n+1)=1.221847e+000; krok(n+1)=6.669234e-003; ng(n+1)=2.612550e+001;
n=30; farx(n+1)=1.119699e+001; foe(n+1)=1.087107e+000; krok(n+1)=3.334617e-003; ng(n+1)=4.788006e+001;
n=31; farx(n+1)=1.036293e+001; foe(n+1)=1.036711e+000; krok(n+1)=4.901052e-003; ng(n+1)=8.057653e+001;
n=32; farx(n+1)=6.042261e+000; foe(n+1)=7.034300e-001; krok(n+1)=9.127324e-003; ng(n+1)=7.992685e+001;
n=33; farx(n+1)=1.867030e+000; foe(n+1)=4.584869e-001; krok(n+1)=2.617870e-002; ng(n+1)=5.923349e+001;
n=34; farx(n+1)=1.229989e+000; foe(n+1)=2.515957e-001; krok(n+1)=6.065168e-001; ng(n+1)=6.235884e+001;
n=35; farx(n+1)=9.701847e-001; foe(n+1)=2.062566e-001; krok(n+1)=3.839848e-001; ng(n+1)=2.510651e+001;
n=36; farx(n+1)=7.670862e-001; foe(n+1)=1.751857e-001; krok(n+1)=3.020544e-001; ng(n+1)=2.223056e+001;
n=37; farx(n+1)=5.285752e-001; foe(n+1)=1.318657e-001; krok(n+1)=7.808753e-001; ng(n+1)=2.170539e+001;
n=38; farx(n+1)=3.943569e-001; foe(n+1)=1.058060e-001; krok(n+1)=2.760258e-001; ng(n+1)=4.655872e+001;
n=39; farx(n+1)=2.898927e-001; foe(n+1)=8.726458e-002; krok(n+1)=5.271762e-001; ng(n+1)=1.791693e+001;
n=40; farx(n+1)=2.212372e-001; foe(n+1)=7.194954e-002; krok(n+1)=3.214238e-001; ng(n+1)=2.533204e+001;
n=41; farx(n+1)=1.959421e-001; foe(n+1)=6.807093e-002; krok(n+1)=2.709781e-001; ng(n+1)=6.176493e+000;
n=42; farx(n+1)=1.526851e-001; foe(n+1)=5.648083e-002; krok(n+1)=1.119298e+000; ng(n+1)=6.973040e+000;
n=43; farx(n+1)=1.133001e-001; foe(n+1)=4.718866e-002; krok(n+1)=9.413399e-001; ng(n+1)=9.029267e+000;
n=44; farx(n+1)=1.027625e-001; foe(n+1)=4.351066e-002; krok(n+1)=4.686024e-001; ng(n+1)=5.569664e+000;
n=45; farx(n+1)=9.880894e-002; foe(n+1)=4.060159e-002; krok(n+1)=4.386596e-001; ng(n+1)=1.396376e+001;
n=46; farx(n+1)=9.517434e-002; foe(n+1)=3.926538e-002; krok(n+1)=2.176811e-001; ng(n+1)=8.005095e+000;
n=47; farx(n+1)=7.600731e-002; foe(n+1)=3.306423e-002; krok(n+1)=1.691553e+000; ng(n+1)=5.469390e+000;
n=48; farx(n+1)=6.478849e-002; foe(n+1)=2.942239e-002; krok(n+1)=8.913350e-001; ng(n+1)=7.555618e+000;
n=49; farx(n+1)=5.482250e-002; foe(n+1)=2.600243e-002; krok(n+1)=4.951781e-001; ng(n+1)=1.497042e+001;
n=50; farx(n+1)=5.079977e-002; foe(n+1)=2.497489e-002; krok(n+1)=3.635836e-001; ng(n+1)=7.605836e+000;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
